name: "ê³¼ì œ ì œì¶œ ì´ìŠˆ ìë™í™”"

on:
  workflow_dispatch:
    inputs:
      session_info:
        description: 'ì„¸ì…˜ ì œëª©'
        required: true
        default: '00ì„¸ì…˜ 0ì°¨ì‹œ ê³¼ì œ'
      requirements:
        description: 'ì‚¬ì „ê³¼ì œ ìš”êµ¬ì‚¬í•­ (ë§ˆí¬ë‹¤ìš´ ë‚´ìš© ì²´í¬ë¦¬ìŠ¤íŠ¸)'
        required: true
        default: '- '

jobs:
  create_issues:
    runs-on: ubuntu-latest
    steps:
      - name: "ì´ìŠˆ ìƒì„±"
        env:
          GH_TOKEN: ${{ github.token }}
          REQUIREMENTS: ${{ github.event.inputs.requirements }}
        run: |
          members=("í™ê¸¸ë™" "ê¹€ì² ìˆ˜" "ì´ì˜í¬" "ë°•ë¯¼ìˆ˜")

          for member in "${members[@]}"
          do
            # heredocì„ ì‚¬ìš©í•˜ì—¬ ë³¸ë¬¸ êµ¬ì„±
            issue_body=$(cat <<EOF
          ### ğŸ” ê³¼ì œ
          - [ ] assignment_{ì£¼ì œ}.ipynb íŒŒì¼ ê³¼ì œ ìˆ˜í–‰

          ### ğŸ” ì‚¬ì „ê³¼ì œ ìš”êµ¬ì‚¬í•­
          $REQUIREMENTS

          ### âœ… ê³¼ì œ ì œì¶œ í™•ì¸ ì‚¬í•­
          - [ ] ë³¸ì¸ì˜ ì´ë²ˆ ì„¸ì…˜ ë¸Œëœì¹˜ì—ì„œ ì‘ì—…í•˜ê³  add, commit, push í–ˆë‚˜ìš”?
          EOF
          )

            gh issue create \
              --title "[submit] ${{ github.event.inputs.session_info }}: ${member}" \
              --body "$issue_body" \
              --label "submit"
          done